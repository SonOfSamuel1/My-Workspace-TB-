# Use AWS Lambda Node.js 20 base image
FROM public.ecr.aws/lambda/nodejs:20

# Copy Lambda function code
COPY lambda/index-openrouter.js ${LAMBDA_TASK_ROOT}/index.js
COPY lambda/package*.json ${LAMBDA_TASK_ROOT}/

# Install dependencies (googleapis)
WORKDIR ${LAMBDA_TASK_ROOT}
RUN npm install --production

# Set the CMD to the Lambda handler
CMD [ "index.handler" ]
